从“富文本剪贴板”想到的
====
2014-12-12-01:08:59

虽然说，不能再在工具上花费太多时间了，但是如果经常使用的工具不能让人满意，工作
起来老想着怎么修改它，或者找个更好的替代品，也是很痛苦的。而且往往找不到更好的
替代者，例如现在要说的词典Goldendict。

已经在网上下了词典，特别好用，比stardict有过之而无不及。但是它没有保存功能，就
是查完一个单词，想把它记到单词本里，难道要手动去敲？理想的情况是，可以云端同步
（虽然有道词典可以，但是不好用）。再不行，就像stardict那样，保存到一个txt文件
里。

[论坛上](http://goldendict.org/forum/viewtopic.php?f=4&t=1094)也有人提出了类似
的要求，但是根本没人回复。我自己去改源码的话，需要投入的精力跟回报肯定不成正比
。所以还是自己写个脚本来将就一下吧。

基本想法是，先把单词复制到剪贴板，然后运行脚本把剪贴板的内容附加到一个文本里。
还可以加上添加时间。用xsel或者xclip都可以实现，像下面这样子：

    #!/bin/bash
    # add context to a txt file
    dictFile=~/dic.txt
    word=$(xsel -b)
    if [ -z $word ];then
    	word=$(xsel)
    fi
    date +"%s" >> $dictFile
    echo $word >> $dictFile
    zenity --info --text= your word \"$word\" has been added to dic.txt

发现这个方法其实挺好，因为在网上要看很多信息，我不需要把整个文章都保存下来，只
想选中某一部分，然后在后台保存下来。

印象笔记的插件已经做得很好了，但是只能在浏览器中使用，而且也不是特别无缝。每次
添加都要创建一条笔记，但如果只想保存单词或者句子，我希望它们可以在一个文件里，
浏览起来也方便。

好了终于到正题。。。

我突然有些好奇，X的剪贴板应该只能保存纯文本才对，那为什么我在浏览器里复制一段
内容到一条笔记中，会保存格式信息，而我把相同的内容复制到文本编辑器（或者浏览器
地址栏）中，显然是没有格式的。

所以是应用程序在接受被粘贴的内容时做了转换？

查到了RTF。

- [Standard Clipboard Format](http://msdn.microsoft.com/en-us/library/windows/desktop/ff729168%28v=vs.85%29.aspx)

- [HTML Clipboard Format](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649015%28v=vs.85%29.aspx)

这个东西是微软提的，跟Word关系很大。Linux里没有找到相关的文档，应该是借鉴过来
的。

**所以系统每次在复制的时候保存的都是富文本信息，然后根据接收端的显示能力来按不
同的格式显示？**

我是想说，即使是这么司空见惯的一件事，也需要有标准在后面支撑。想来，把人的需要
量化成标准然后在所有人之间共享，这个过程是很奇妙的。尤其是在制定标准的时候，因
为人的要求是全新的，不知道那种实现方法好，就会有不断的尝试和权衡，背后是一个新
信念：**这件事肯定存在着一种聪明而高效的解决方案。**

嗯，表表决心吧，我现在在做AVS视频标准方面的工作，要好好努力，做出自己的一些贡
献呀！
